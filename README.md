경력기술서는 총 세가지 주제(서비스 개발,서비스 개선,업무 환경 개선)로 구성되어 있습니다.

---

# **한패스**

**2022.04.18 ~ 재직중**

# 서비스 개발

## 가상 계좌

### 배경

- KICC 가상계좌에서 새로운 투자사 전북은행 계좌로 정책이 변경되어, 기존 가상계좌 발급 서비스를 이전하여 전북은행 가상계좌 서비스를 신규 개발해야 함

### **담당**

- **전북 은행**&**쿠콘**과 협력하여 전북은행에서 가상계좌를 발급받아 시스템에 등록, **쿠콘**사에서 제공받은 가상계좌 시스템 설치
- **쿠콘 가상계좌 시스템**과 연동하여 가상계좌 발급, 해지 및 입금 처리 API 기능 개발
- 대외 서버가 잘못된 **Nameserver** 설정으로 벤더사 타임아웃(3초) 발생
    - 사내 **Nameserver**를 바라보고있지 않는 부분을 **Strace**로 발견, 사내 **Nameserver**로 변경
- 기존 시스템은 입금을 1분 단위 스케줄러로 확인하여, 매달 2~3%의 입금 확인 요청이 발생
    - **Kafka Connector**를 활용하여 입금 정보를 토픽에 저장하고, 서버에서 즉시 처리하도록 개선

### 결과

- 신규 고객의 가상계좌관련 CS 요청 건수를 15% 이하로 감소
- 타임아웃 문제로 인한 재처리 요청 수를 10%로 줄임

## ATM 입/출금

### 배경

- **Lotte K7& Nice** 업체와 협력하여 바코드 입/출금 서비스를 신규 개발해야함
- 기존 ATM 전문 서버들이 분리되어 있고, **OIO 소켓**으로 되어 있어 유지보수가 어렵고, 피크 타임에 간헐적인 장애가 발생

### 담당

- ATM에서 거래 검증,거래 확인 기능을 연동하여 ATM요청을 처리하는 전문 통신 서버 개발
    - Netty를 사용하여 전문 수신 후 파싱하여 API서버로 전달
- 바코드 생성, 거래 검증, 거래 확인을 처리하는 API 서버 개발
- 피크 타임 응답지연이 연쇄적으로 퍼지는 이슈 조치
    - 퍼져있는 전문 요청/수신 서비스를 하나로 통합하여 하나의 task로만 작업 되던 부분을 각 인스턴스별 10개의 이벤트루프로 처리되도록 변경

### 결과

- 피크 타임 응답 지연으로 발생하던 타임아웃 문제 제거
- 분산되어 있던 서비스 인스턴스 수가 9개에서 3개로 감소

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/c3352f72-b7e9-4e8a-9351-62149bc44357/bd95f361-23f1-4893-8ad0-80088ce97157/Untitled.png)

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/c3352f72-b7e9-4e8a-9351-62149bc44357/401526ef-947b-4577-8574-2b3afead7976/Untitled.png)

## 대외 연동

### 배경

- Billgate 결제사를 통한 휴대폰 충전 기능을 신규 개발해야함
- 핸드폰 충전을 수행할 수 있는 업체 수를 늘려, 하나의 결제사의 의존하지않고 여러 방법으로 고객이 핸드폰 결제를 처리할 수 있도록 개발
- 가장 수수료가 적은 업체가 우선적으로 사용될 수 있도록 처리해야함

### 담당

- Bilgate 결제사의 API스펙에 맞춰 핸드폰 충전 플로우 개발
    - Bilgate에서 제공된 SDK를 사용
- 단일 결제사만 사용하지 않도록 업체별 최신 5분간 성공률%로 나누어 처리
    - A업체를 우선적으로 사용하기 위해 95%이상시 A업체 위주로 동작
    - 데이터가 없는 업체는 100%로 간주하여 비교
    - 마지막 결제 확인이 아닌 결제 생성시의 데이터로 비교

### 결과

- 특정 벤더사의 장애 발생시 유동적으로 스위칭되어 서비스가 안정적으로 진행되게 처리

## 통신 모듈

### 배경

- 다양한 해외 은행과의 협력을 통해 금융 서비스를 확장하고, 한 은행에 의존하지 않고 여러 은행을 통해 안정적인 금융 서비스 제공이 필요.
- 각 은행 간의 송금, 공과금 처리, KYC, 환불 처리 등 다양한 기능과 여러 프로토콜(SOAP, JSON RPC, TCP, HTTP 등)을 통한 연동이 필요함

### 담당

- Western Union, Union Pay, Faysal Bank, Ventaja 등 10개 이상의 해외 은행, 공공 서비스와 연동한 라이브러리 개발
    - 라이브러리는 Nexus로 업로드하여 필요한 서비스에서 불러 와서 사용할 수 있도록 처리
- 해외 은행들의 기술 문서들에 맞춰 기능 제공
    - 서비스에서 사용할 때 편리하게 적용될 수 있도록 암호화 및 내부적 구현을 처리하여 제공
    - 다양한 프로토콜(SOAP, JSON RPC, TCP, HTTP)을 통해 서비스 연동 처리

### 결과

- 이용하는 서버의 혼잡도가 분리되어, 업체별 이슈에 빠른 대응 가능

## 배치

스프링 배치와 Jenkins를 사용하여 배치를 실행

- 업체 별 가용 가능한 잔액 조회 후, 담당자에게 알림을 처리해주는 배치 개발
- KICC 가상계좌가 특정 범죄, 특정 나라에 따라 정책이 변경되어 일괄 비활성화하는 배치 개발
- 외국인 신분증의 경우 회원가입 유지기간이 필요하여 선 등록 후 신분증 인증을 후처리 하는 배치 개발
- 유니온 페이 Card bin 목록이 주기적으로 변경되어 주기별로 재 갱신하는 배치 개발
- 타발 벤더사별 일일 정산 CSV 파일 생성 후 업로드 해주는 배치 개발
- 일별 유니온페이 정산 파일 분석 후 사내 정산 시스템으로 이전하는 배치 개발

---

# 서비스 개선

## 앱 서버

### 배경

- 앱과 통신하는 서버에서 가장 많이 접근하는 메인페이지가 하나의 API호출로 되어있어 각 서비스의 상태에 따라 앱이 불안정한것 처럼 느껴짐

### 담당

- 실시간성이 아닌 카드 소유 내역, 카드 사용 내역 등의 데이터를 적절한 캐시 시간을 두어 처리
    - Redis를 사용하여 데이터를 캐시
    - 각 서비스 담당자와 협의 후 적당한 시간 적용
- 여러 API로 나누어 호출하도록 API 분리

### 결과

- 기존 메인페이지가 최대 600ms까지 넘었던 부분을 33ms내로 응답될 수 있도록 개선
- 시스템적으로 중요한 데이터외에는 비 동기로 보여지도록 수정

## 코어 서버

### 배경

- 많은 기능이 코어서버에 물려있어 단일 병목지점이 발생
- 레거시 시스템으로 되어있어, 접근성이 용이하지않은 문제 발생
- 가장 자주 배포되어야 하는 시스템이, 가장 배포가 까다로워져 버린 문제를 해결해야함

### 담당

- 코어 서버의 도메인 중 자금 관리 기능을 추출하여 새로운 서비스로 전환
    - 회원 충전, 회원 송금 등 돈이 오고가는 기능을 추출
- 전환중 80% 이상의 테스트 커버리지를 포함하여 개발
- 트랜잭션이 크게잡혀있는 부분이나, 예외 처리가 되지 않는 부분을 추가하여 개선
- 기존 시스템의 데이터를 실시간으로 이전하여 투 트랙으로 시스템이 운용되어 진행될 수 있도록 처리
    - 새로운 데이터베이스를 사용하는 서비스 이기 때문에 실시간으로 데이터 싱크

### 결과

- 해당 서비스의 유지보수에 접근성이 낮아져, 근속 기간이 짧은 직원들도 업무를 수행할 수 있게됨
- 예외처리가 되지않아 데이터를 수동으로 맞추던 부분 해결

## 내부 통신 통합

### 배경

- 내부 통신시마다 하나하나 시스템을 등록해주어야 하는 수동 작업 존재
- 해당 인스턴스의 활성 상태 여부가 체크되지 않고 통신하는 문제 존재
- 내부 도메인이 잘 관리되지 않는 문제 존재

### 담당

- 설정을 담당하는 서비스 구축 및 인스턴스를 재 기동 하지 않더라도 새로운 설정을 불러올 수 있도록 처리
    - Spring Config의 native 프로필로 저장소의 resources를 읽도록 처리
- 서비스 Discovery를 구축하고 각 서비스가 등록되게하여, 인스턴스에 대한 내용을 각 코드 저장소에서 관리하도록 처리
    - Spring cloud Eureka를 사용하여 서비스 디스커버리 구현
    - 각 인스턴스의 만료 시간은 2초, 재시도 1초로 처리
- Gateway를 구축하고 각 서비스가 Gateway를 거쳐 통신할 수 있도록 처리
    - Spring cloud gateway를 사용하여 각 서비스로 통신
- 내부 통신시 자체 서비스의 장애가 시스템 전체의 장애로 전파되지 않도록 Circuit Breaker 처리
    - 서킷브레이커가 필터 별로 커스텀된 이름을 가질 수 있도록 수정
    - 서킷 브레이커의 상태를 관리하는 API 생성
- 고객 확인 전화가 가는 서비스의 유량제어 처리
    - 회원 확인 전화 기능은 인스턴스 수*30개로 처리될 수 있도록 변경

### 결과

- 수동으로 작업하는 부분을 간단한 설정 몇가지로 처리하도록 하여, 신규 서비스 생성 절차가 간소화됨
- 배포시 생기는 다운 타임 제거로 배포를 자주 진행할수 있도록 처리

## 국내 송금

### 배경

- 특정 은행 장애 발생시 오픈 뱅킹, 쿠콘과 연동된 서비스의 장애가 전파되는 이슈 발생
- 기존 서비스가 트랜잭션이 크게 잡혀있어, 외부 통신 지연시 커넥션풀이 고갈되어 다른 서비스에 영향이 가는 이슈 발생

### 담당

- 주기적으로 오픈뱅킹 은행 상태 조회를 이용하여 내부 Gateway의 해당 은행별 circuit 상태를 변경
- 트랜잭션 단위를 작게 변경하여, 통신이 지연되도 커넥션풀이 문제되지 않도록 하여, 그 외 시스템까지 영향이 가지않도록 변경

### 결과

- 은행 상태에 맞춰 빠르게 실패응답을 처리하여, 특정 은행에 의존되지 않도록 처리

## 대외 연동

### 배경

- 외부에서 들어오는 요청이 한번에 모아서 들어오는 경우가 있고 한번 보낸 요청은 다시보내지 않는 경우가 존재하여 요청된 액션이 처리될수 있도록 해야함
- 업체별 API접근에 대한 ACL이 걸려있지 않아, 악의적 사용을 방지할 수 없음

### 담당

- 해당 요청이 시스템 내부에서 실패시 retry를 자체적으로 할 수 있도록 처리
    - spring retry로 최소 3회 재처리 할수 있도록 수정
- 간헐적으로 벤더사의 요청이 한번에 들어와 동시성 이슈가 생기는 부분 처리
    - 재 요청이 되지않기 때문에 비관적 락을 사용하여 갱신 손실을 방지
- 특정 api 마다 벤더사의 아이피로 API별로 ACL처리

### 결과

- Galaxia 벤더사의 요청 실패건이 20%이하로 감소

# 업무 환경 개선

## 로그 통합 및 시각화

### 배경

- 50개 이상의 서버에서 개별 로그를 확인해야 하는 비효율적인 상황으로 인해 이슈 트래킹에 많은 시간이 소요됨
- 실시간으로 문제 상황을 시각화하여 빠르게 파악하고, 팀 내에서 효율적으로 공유할 수 있는 수단이 부재
- Jabix, Watba, Grafana 등 많은 도구들을 사용함에 있어 관리가 어렵고 실 사용이 어려운 문제 발생

### 담당

- Elasticsearch 기반의 로그 통합 시스템 구축
    - 기존 Logstash에서 Fleet으로 전환하여 중앙 관리형 데이터 수집
    - ECS Logger를 적용하여 모든 서비스 로그 포맷을 표준화하고, 통합 관리 가능하게 구현
- Elastic APM을 도입하여 애플리케이션 성능 모니터링 시스템 구축
    - APM 에이전트를 애플리케이션에 연동
    - 의존성 장애시 알림을 추가하여 즉각적으로 조치할 수 있도록 처리

### 결과

- 이슈 트래킹 시간을 크게 단축시켜 실시간으로 문제를 발견하고 대응 가능하게 됨
- 표준화된 로그 및 성능 모니터링을 통해 시스템 안정성과 성능을 동시에 개선
- 특정 서비스 장애나 성능 저하 발생 시, 신속한 분석 및 대응 체계를 확보

## 업무 프로세스 개선

### 배경

- 기존의 업무가 구두식으로 진행되는 경우가 많아, 해당 업무의 히스토리를 확인하기 어려움
- 프로젝트의 진행사항, 변경사항 및 요청사항이 공유되지 않아 진행도를 확인하기 어려움

담당

- 다양하게 사용하고있던 협업툴을 gitlab 이슈 보드로 통합하여 마일스톤별로 진행도를 관리 할 수 있도록 처리

결과

- 호주 진출 프로젝트 담당자 변경이 여러 차례 있엇고, 프로젝트가 오래끌렸지만 안정적으로 런칭 준비를 마침

## 버전관리 & 배포

배경

- 테스트 코드가 적어 유지보수에 어려움이 발생하여 이를 제한할수 있는 수단이 필요
- 배포 버전의 버전관리가 안되고, 인스턴스 배포시 마다 빌드를 하여 배포 타임이 길어지는 문제 존재
- 배포가 수동으로 처리되고있는 서비스도 존재하여 배포를 자주 하기 어려운 이슈가 존제

### 담당

- 코드 스캐너(sonarqube) 및 테스트 커버리지(jacoco) 정책 공지 및 적용 가이드 제공
- 빌드시 Jenkins에서 사설 Nexus로 태그 버전을 따라 해당 빌드 버저닝되어 올라가도록 수정
- 수동으로 처리되고 있는 서비스를 전부 찾아 일괄 Jenkins 잡으로 등록

결과

- 테스트가 없었던 레거시 서비스도 최소 50%이상의 테스트 코드 작성
- 배포 과정이 번거로워 배포를 모아서 하던 서비스들을 잦은 주기로 배포하도록 변경
- 빌드 버전관리로 이슈 발생시 빌드 타임이 제거된 즉시 롤백이 가능하도록 처리됨

---

# AWA 소프트

**2021.09.27 ~ 2022.04.18**

# 서비스 개발

## 안전톡

### 배경

- 중대 재해 보호법의 중요도가 높아져 산업시설에서 사용할 수 있는 서비스를 제공

### 담당

- 회원 관리 서비스 신규 개발
- 주소 기반으로 근처 지점 검색하는 조회 서비스 개발